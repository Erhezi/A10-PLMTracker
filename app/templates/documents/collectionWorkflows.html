{% extends 'base.html' %}
{% block title %}Collector Workflows - PLM Tracker{% endblock %}
{% block content %}
<div class="container py-4">
  <nav aria-label="breadcrumb" class="small mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item text-body-secondary">Collect</li>
      <li class="breadcrumb-item active" aria-current="page">Item Entry Guide</li>
    </ol>
  </nav>

  <h1 class="h3 fw-semibold mb-3">Item Addition &amp; Establish the Conversion Links</h1>

  <div class="alert alert-info" role="alert">
    The tracker is designed to monitor item conversions for inventory items under company 3000 (Montefiore Medical Center). It does not currently support companies outside 3000 and will not be used to introduce brand-new, non-conversion items. Continue to use existing onboarding procedures for introducing new items, and note that non-inventory conversion tracking is out of scope for this design and will not be integrated to this procedure in future release.
  </div>

  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h2 class="h5">Why use the Collect module?</h2>
      <ul class="mb-0">
        <li>Aligns data entry, workflow tracking, and the export files that drive ERP setup so every handoff uses the same information.</li>
        <li>Provides a clean audit trail for each conversion, making it easy to compare legacy and replacement items throughout the lifecycle.</li>
        <li>Prevents messy cyclic or many-to-many replacements by enforcing the allowed patterns, which keeps conversions easy to monitor and report.</li>
      </ul>
    </div>
  </div>

  <section id="picker-workflow" class="mt-4">
    <h2 class="h4">1. Add items with the picker</h2>
    <p>
      Use the pickers on the Collect page to add one item conversion at a time. The left picker locates the item that will be replaced, and the right picker confirms the replacement.
    </p>
    <ul>
      <li>Start by typing the six-digit Infor item number in the left picker to find the item you want to replace or convert.</li>
      <li>The replacement picker defaults to the same six-digit search. You can also switch the mode toggle to look up Infor contract lines and search by manufacturer details when that is easier.</li>
      <li>If no replacement exists, choose <strong>NO REPLACEMENT</strong> so the system knows this item is being discontinued without a substitute.</li>
      <li>Items that appear grayed out are not ready for company 3000 or do not have the required contract access for MHS users. Grayed-out rows cannot be added until the underlying setup is complete.</li>
      <li>If your search comes back empty, verify the number in ERP or your source of truth. When the item truly does not exist in our system, contact an administrator so we can review and load the missing data.</li>
    </ul>
  </section>

  <section id="batch-workflow" class="mt-5">
    <h2 class="h4">2. Add items with batch upload</h2>
    <p>
      Batch upload speeds up the process whenever you already know the six-digit numbers for both the item and its replacement.
    </p>
    <ul>
      <li>Prepare an Excel file with two columns named <em>Item</em> and <em>Replace Item</em>. Each row should list a known pair.</li>
      <li>Upload the file through the batch ingestion form. The system fills in the remaining details, validates the entries, and places them in the correct workflow stage.</li>
      <li>If a replacement item number is unknown, leave that pair out of the file and add it manually with the picker. Manual entry keeps the link between the contract record and the item master so we can trace the entire lifecycle from contract onboarding through conversion.</li>
    </ul>
  </section>

  <section id="error-handling" class="mt-5">
    <h2 class="h4">3. Error handling</h2>
    <p>
      Most errors fall into two categories. The message shown in the app will tell you which one matches your situation.
    </p>
    <ol>
      <li><strong>Relation type rules.</strong> Some combinations break the current allowed patterns (one-to-one, one-to-many, or many-to-one). Review the error, locate the existing row that conflicts with your new pair, and either delete or complete that entry before trying again.</li>
      <li><strong>Item not in scope.</strong> The item or replacement is missing from the tracker or not ready for company 3000. Work with an administrator to confirm eligibility and decide the next steps.</li>
    </ol>
    <p class="mb-0">
      If you attempt to add a pair that already exists, the tracker will simply skip it, so you can re-run uploads without creating duplicates. For all other failures, use the guidance above to clear the issue and resubmit.
    </p>
  </section>
</div>
{% endblock %}
