{% extends 'base.html' %}
{% block title %}User Control Guide — PLM Tracker{% endblock %}
{% block content %}
<div class="container py-4">
  <nav aria-label="breadcrumb" class="small mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item text-body-secondary">User Control</li>
      <li class="breadcrumb-item active" aria-current="page">Access Control Guide</li>
    </ol>
  </nav>

  <h1 class="h3 fw-semibold mb-3">Admin User Control</h1>
  <p class="text-muted">
    Use this guide as your playbook for reviewing user accounts, approving access, and
    keeping the PLM Tracker roster accurate. Each section walks through what you see in the
    User Control table, what to watch for, and how to explain the process to business partners.
  </p>

  <section id="access" class="mt-4">
    <h2 class="h4">Access control</h2>
    <ul>
      <li><strong>For admins only.</strong> Only administrators can open the User Control page. If someone without admin rights tries to access it, they are routed back to the login screen with a reminder that the area is restricted.</li>
      <li><strong>Active admins.</strong> An admin account must be active to make changes. If an admin is disabled, they cannot reactivate themselves until another admin restores their access.</li>
      <li><strong>Graceful self-edits.</strong> When you adjust your own role or status, the system lets the current page finish loading so you are not bounced out mid-change. Use this to test permissions safely.</li>
    </ul>
  </section>

  <section id="lifecycle" class="mt-5">
    <h2 class="h4">Lifecycle actions</h2>
    <div class="row g-4">
      <div class="col-lg-6">
        <div class="border rounded p-3 h-100">
          <h3 class="h6 text-uppercase text-muted">Approvals &amp; disables</h3>
          <ul class="small mb-0">
            <li><strong>Approve access.</strong> Use the green check to activate a pending user. The system timestamps who approved the request and notifies the employee by email so they know they can log in.</li>
            <li><strong>Disable access.</strong> Choose the red “Disable” button to pause an account when someone leaves a project or needs a timeout. You cannot disable your own account, so coordinate with another admin if your access needs to change.</li>
            <li><strong>Delete user.</strong> Remove test or duplicate accounts with the delete option. The user is removed from the table entirely and cannot be restored without re-registering.</li>
          </ul>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="border rounded p-3 h-100">
          <h3 class="h6 text-uppercase text-muted">Roles</h3>
          <ul class="small mb-0">
            <li><strong>Pick the right role.</strong> Choose between <em>Admin</em>, <em>User</em>, or <em>View-only</em> from the dropdown in each row. Save the change and the table confirms the new level immediately.</li>
            <li><strong>What view-only sees.</strong> View-only accounts can open dashboards and reports but cannot make edits or see the collection workflows. Use this when someone just needs read access.</li>
            <li><strong>Testing your own role.</strong> If you downgrade yourself to User or View-only, the page stays open so you can verify exactly what those roles experience before logging back in as an admin.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section id="ui" class="mt-5">
    <h2 class="h4">Table interactions</h2>
    <ul>
      <li><strong>Filtering.</strong> Use the quick filter to narrow the list by name, email, or role. Separate multiple search terms with semicolons and add <code>*</code> as a wildcard when you only remember part of a word.</li>
      <li><strong>Sorting.</strong> Click any column header to sort by that value. Click again to flip between ascending or descending order. The table remembers which column you last sorted.</li>
      <li><strong>Row count.</strong> A counter above the table shows how many records match your current filters so you can confirm the list looks right before sharing it.</li>
      <li><strong>Action buttons.</strong> Approve, disable, delete, and role-change buttons all prompt for confirmation to prevent accidental clicks. Nothing happens until you confirm.</li>
    </ul>
  </section>
</div>
{% endblock %}
